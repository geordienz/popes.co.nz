webpackJsonp([2],{692:function(e,t,s){e.exports=s(693)},693:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=s(3),i=s.n(t),n=s(694);s(698);new i.a({el:"#statamic",mixins:[n.a],data:{isPublishPage:!1,isPreviewing:!1,showShortcuts:!1,navVisible:!1,version:Statamic.version,draggingNonFile:!1,sneakPeekViewport:null,sneakPeekFields:null,windowWidth:null,modalOpen:!1,showLoginModal:!1},computed:{hasSearchResults:function(){return this.$refs.search.hasItems}},methods:{preview:function(){var t=this,s=this;s.$broadcast("previewing"),this.sneakPeekViewport=e(".sneak-peek-viewport")[0],this.sneakPeekFields=e(".page-wrapper")[0],e(".sneak-peek-wrapper").addClass("animating on"),this.wait(200).then(function(){s.isPreviewing=!0;var i=localStorage.getItem("statamic.sneakpeek.width")||400;return t.sneakPeekViewport.style.left=i+"px",t.sneakPeekFields.style.width=i+"px",e(t.$el).addClass("sneak-peeking"),t.$emit("livepreview.opened"),t.wait(200)}).then(function(){return e("#sneak-peek-iframe").show(),e(t.$el).addClass("sneak-peek-editing sneak-peek-animating"),t.wait(500)}).then(function(){e(t.$el).removeClass("sneak-peek-animating")})},stopPreviewing:function(){var t=this;this.$broadcast("previewing.stopped"),e(".sneak-peek-wrapper").addClass("animating"),e(this.$el).addClass("sneak-peek-animating"),e(this.$el).removeClass("sneak-peek-editing"),e("#sneak-peek-iframe").fadeOut(),e(".sneak-peek-wrapper .icon").hide(),this.wait(500).then(function(){return t.sneakPeekViewport.style.left=null,t.sneakPeekFields.style.width=null,e(t.$el).removeClass("sneak-peek-animating"),e(t.$el).removeClass("sneak-peeking"),t.wait(200)}).then(function(){return t.isPreviewing=!1,t.$emit("livepreview.closed"),e(".sneak-peek-wrapper").removeClass("on"),t.wait(200)}).then(function(){e(".sneak-peek-wrapper").removeClass("animating")})},wait:function(e){return new Promise(function(t){setTimeout(t,e)})},toggleNav:function(){this.navVisible=!this.navVisible},dragStart:function(){this.draggingNonFile=!0},dragEnd:function(){this.draggingNonFile=!1},sneakPeekResizeStart:function(t){window.addEventListener("mousemove",this.sneakPeekResizing),window.addEventListener("mouseup",this.sneakPeekResizeEnd),e(".sneak-peek-iframe-wrap").css("pointer-events","none")},sneakPeekResizeEnd:function(t){window.removeEventListener("mousemove",this.sneakPeekResizing,!1),window.removeEventListener("mouseup",this.sneakPeekResizeEnd,!1),e(".sneak-peek-iframe-wrap").css("pointer-events","auto")},sneakPeekResizing:function(e){e.preventDefault();var t=e.clientX;t=t<350?350:t,this.sneakPeekViewport.style.left=t+"px",this.sneakPeekFields.style.width=t+"px",localStorage.setItem("statamic.sneakpeek.width",t),this.$emit("livepreview.resizing",t)}},ready:function(){var t=this;Mousetrap.bind(["/","ctrl+f"],function(t){e("#global-search").focus()},"keyup"),Mousetrap.bind("?",function(e){this.showShortcuts=!0}.bind(this),"keyup"),Mousetrap.bind("escape",function(e){this.$broadcast("close-modal"),this.$broadcast("close-editor"),this.$broadcast("close-selector"),this.$broadcast("close-dropdown",null)}.bind(this),"keyup"),window.addEventListener("dragstart",this.dragStart),window.addEventListener("dragend",this.dragEnd),this.windowWidth=document.documentElement.clientWidth,window.addEventListener("resize",function(){return t.windowWidth=document.documentElement.clientWidth})},events:{changesMade:function(e){window.onbeforeunload=e?function(){return""}:null},"modal.open":function(){this.modalOpen=!0},"modal.close":function(){this.modalOpen=!1}}})}.call(t,s(2))},694:function(e,t,s){"use strict";s(695);var i=s(696),n=s.n(i),o=s(697),a={theme:"default",timeLife:5e3,closeBtn:!1},r={template:s.n(o).a,props:{message:{required:!0},position:{type:Number,required:!0},destroyed:{twoWay:!0,type:Boolean,required:!0},options:{type:Object,coerce:function(e){return Object.assign({},a,e)}}},data:function(){return{isShow:!1}},computed:{styles:function(){return["alert-"+this.options.theme,this.options.closeBtn?"alert-dismissible":null]},style:function(){return"transform: translateY("+this.options.directionOfJumping+100*this.position+"%)"}},ready:function(){var e=this;setTimeout(function(){e.isShow=!0},50),this.options.timeLife&&this._startLazyAutoDestroy()},detached:function(){clearTimeout(this.timerDestroy)},methods:{remove:function(){return this._clearTimer(),this.destroyed=!0,this.$remove().$destroy(),this},_startLazyAutoDestroy:function(){var e=this;this._clearTimer(),this.timerDestroy=setTimeout(function(){e.$remove().$destroy()},this.options.timeLife)},_clearTimer:function(){this.timerDestroy&&clearTimeout(this.timerDestroy)},_startTimer:function(){this.options.timeLife&&this._startLazyAutoDestroy()},_stopTimer:function(){this.options.timeLife&&this._clearTimer()}}};var u={maxToasts:6,position:"left bottom"},c={template:n.a,data:function(){return{toasts:[],options:u}},computed:{classesOfPosition:function(){return this._updateClassesOfPosition(this.options.position)},directionOfJumping:function(){return this._updateDirectionOfJumping(this.options.position)}},methods:{showToast:function(e,t){return this._addToast(e,t),this._moveToast(),this},setOptions:function(e){return this.options=Object.assign(this.options,e||{}),this},_addToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(t.directionOfJumping=this.directionOfJumping,this.toasts.unshift({message:e,options:t,isDestroyed:!1}))},_moveToast:function(e){var t=this.options.maxToasts>0?this.options.maxToasts:9999;this.toasts=this.toasts.reduceRight(function(e,s,i){return s.isDestroyed?e:i+1>=t?e:[s].concat(e)},[])},_updateClassesOfPosition:function(e){return e.split(" ").reduce(function(e,t){return e["--"+t.toLowerCase()]=!0,e},{})},_updateDirectionOfJumping:function(e){return e.match(/top/i)?"+":"-"}},components:{"vue-toast":r}};t.a={components:{VueToast:c},data:{toast:null,flash:Statamic.flash},methods:{flashExistingMessages:function(){var e=this;this.flash.forEach(function(t){var s=t.type,i=t.message;return e.setFlashMessage(i,{theme:s})})},bindToastNotifications:function(){this.toast=this.$refs.toast,this.toast&&this.toast.setOptions({position:"bottom right"})},setFlashMessage:function(e,t){this.toast.showToast(e,{theme:t.theme,timeLife:t.timeout||5e3,closeBtn:!t.hasOwnProperty("dismissible")||t.dismissible})}},events:{setFlashSuccess:function(e,t){(t=t||{}).theme="success",this.setFlashMessage(e,t)},setFlashError:function(e,t){(t=t||{}).theme="danger",this.setFlashMessage(e,t)}},ready:function(){this.bindToastNotifications(),this.flashExistingMessages()}}},695:function(e,t){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var s=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var o=Object.keys(Object(n)),a=0,r=o.length;a<r;a++){var u=o[a],c=Object.getOwnPropertyDescriptor(n,u);void 0!==c&&c.enumerable&&(s[u]=n[u])}}return s}})},696:function(e,t){e.exports='<div class=vue-toast-manager_container :class=classesOfPosition> <vue-toast v-for="toast in toasts" :message=toast.message :options=toast.options :destroyed.sync=toast.isDestroyed :position=$index></vue-toast> </div> '},697:function(e,t){e.exports='<div class=vue-toast_container @mouseover=_stopTimer @mouseleave=_startTimer :style=style v-show=isShow transition> <div class="vue-toast_message alert" :class=styles> <button type=button class=close aria-label=Close v-if=options.closeBtn @click=remove> <span aria-hidden=true>Ã—</span> </button> <span v-html=message></span> </div> </div> '},698:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=s.n(i),o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t}return o(e,[{key:"success",value:function(e,t){this.instance.$dispatch("setFlashSuccess",e,t)}},{key:"error",value:function(e,t){this.instance.$dispatch("setFlashError",e,t)}}]),e}();Object.defineProperties(n.a.prototype,{$notify:{get:function(){return new a(this)}}})}},[692]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvdG9hc3QvdG9hc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL3RvYXN0L21hbmFnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL3RvYXN0L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9taXhpbnMvTm90aWZpY2F0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvdG9hc3QvcG9seWZpbGxzLmpzIiwid2VicGFjazovLy8uL2FwcC9zdGF0YW1pYy9yZXNvdXJjZXMvanMvY29tcG9uZW50cy90b2FzdC9tYW5hZ2VyL3RlbXBsYXRlLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL3RvYXN0L3RvYXN0L3RlbXBsYXRlLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL05vdGlmaWNhdGlvbkJ1cy5qcyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Z1ZV9fX2RlZmF1bHQiLCJhIiwiZWwiLCJtaXhpbnMiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX21peGluc19Ob3RpZmljYXRpb25zX2pzX18iLCJkYXRhIiwiaXNQdWJsaXNoUGFnZSIsImlzUHJldmlld2luZyIsInNob3dTaG9ydGN1dHMiLCJuYXZWaXNpYmxlIiwidmVyc2lvbiIsIlN0YXRhbWljIiwiZHJhZ2dpbmdOb25GaWxlIiwic25lYWtQZWVrVmlld3BvcnQiLCJzbmVha1BlZWtGaWVsZHMiLCJ3aW5kb3dXaWR0aCIsIm1vZGFsT3BlbiIsInNob3dMb2dpbk1vZGFsIiwiY29tcHV0ZWQiLCJoYXNTZWFyY2hSZXN1bHRzIiwidGhpcyIsIiRyZWZzIiwic2VhcmNoIiwiaGFzSXRlbXMiLCJtZXRob2RzIiwicHJldmlldyIsIl90aGlzIiwic2VsZiIsIiRicm9hZGNhc3QiLCIkIiwiYWRkQ2xhc3MiLCJ3YWl0IiwidGhlbiIsIndpZHRoIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0eWxlIiwibGVmdCIsIiRlbCIsIiRlbWl0Iiwic2hvdyIsInJlbW92ZUNsYXNzIiwic3RvcFByZXZpZXdpbmciLCJfdGhpczIiLCJmYWRlT3V0IiwiaGlkZSIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidG9nZ2xlTmF2IiwiZHJhZ1N0YXJ0IiwiZHJhZ0VuZCIsInNuZWFrUGVla1Jlc2l6ZVN0YXJ0IiwiZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzbmVha1BlZWtSZXNpemluZyIsInNuZWFrUGVla1Jlc2l6ZUVuZCIsImNzcyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImNsaWVudFgiLCJzZXRJdGVtIiwicmVhZHkiLCJfdGhpczMiLCJNb3VzZXRyYXAiLCJiaW5kIiwiZm9jdXMiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiZXZlbnRzIiwiY2hhbmdlc01hZGUiLCJjaGFuZ2VkIiwib25iZWZvcmV1bmxvYWQiLCJtb2RhbC5vcGVuIiwibW9kYWwuY2xvc2UiLCJkZWZhdWx0T3B0aW9ucyIsInRoZW1lIiwidGltZUxpZmUiLCJjbG9zZUJ0biIsInRvYXN0IiwidGVtcGxhdGUiLCJwcm9wcyIsIm1lc3NhZ2UiLCJyZXF1aXJlZCIsInBvc2l0aW9uIiwidHlwZSIsIk51bWJlciIsImRlc3Ryb3llZCIsInR3b1dheSIsIkJvb2xlYW4iLCJvcHRpb25zIiwiT2JqZWN0IiwiY29lcmNlIiwiYXNzaWduIiwiaXNTaG93Iiwic3R5bGVzIiwiZGlyZWN0aW9uT2ZKdW1waW5nIiwiX3N0YXJ0TGF6eUF1dG9EZXN0cm95IiwiZGV0YWNoZWQiLCJjbGVhclRpbWVvdXQiLCJ0aW1lckRlc3Ryb3kiLCJyZW1vdmUiLCJfY2xlYXJUaW1lciIsIiRyZW1vdmUiLCIkZGVzdHJveSIsIl9zdGFydFRpbWVyIiwiX3N0b3BUaW1lciIsIm1hbmFnZXJfZGVmYXVsdE9wdGlvbnMiLCJtYXhUb2FzdHMiLCJtYWluIiwidGVtcGxhdGVfZGVmYXVsdCIsInRvYXN0cyIsImNsYXNzZXNPZlBvc2l0aW9uIiwiX3VwZGF0ZUNsYXNzZXNPZlBvc2l0aW9uIiwiX3VwZGF0ZURpcmVjdGlvbk9mSnVtcGluZyIsInNob3dUb2FzdCIsIl9hZGRUb2FzdCIsIl9tb3ZlVG9hc3QiLCJzZXRPcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidW5zaGlmdCIsImlzRGVzdHJveWVkIiwicmVkdWNlUmlnaHQiLCJwcmV2IiwiaSIsImNvbmNhdCIsInNwbGl0IiwicmVkdWNlIiwidmFsIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsImNvbXBvbmVudHMiLCJ2dWUtdG9hc3QiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiVnVlVG9hc3QiLCJmbGFzaCIsImZsYXNoRXhpc3RpbmdNZXNzYWdlcyIsImZvckVhY2giLCJfcmVmIiwic2V0Rmxhc2hNZXNzYWdlIiwiYmluZFRvYXN0Tm90aWZpY2F0aW9ucyIsIm9wdHMiLCJ0aW1lb3V0IiwiaGFzT3duUHJvcGVydHkiLCJkaXNtaXNzaWJsZSIsInNldEZsYXNoU3VjY2VzcyIsInNldEZsYXNoRXJyb3IiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFyZ2V0IiwiZmlyc3RTb3VyY2UiLCJUeXBlRXJyb3IiLCJ0byIsIm5leHRTb3VyY2UiLCJrZXlzQXJyYXkiLCJrZXlzIiwibmV4dEluZGV4IiwibGVuIiwibmV4dEtleSIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiTm90aWZpY2F0aW9uQnVzIiwiaW5zdGFuY2UiLCJfY2xhc3NDYWxsQ2hlY2siLCIkZGlzcGF0Y2giLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvdG90eXBlIiwiJG5vdGlmeSIsImdldCJdLCJtYXBwaW5ncyI6Im1MQUdBQSxFQUFRLEtBRUMsSUFBSUMsRUFBQUMsR0FDVEMsR0FBSSxZQUVKQyxRQUFVQyxFQUFBLEdBRVZDLE1BQ0lDLGVBQWUsRUFDZkMsY0FBYyxFQUNkQyxlQUFlLEVBQ2ZDLFlBQVksRUFDWkMsUUFBU0MsU0FBU0QsUUFDbEJFLGlCQUFpQixFQUNqQkMsa0JBQW1CLEtBQ25CQyxnQkFBaUIsS0FDakJDLFlBQWEsS0FDYkMsV0FBVyxFQUNYQyxnQkFBZ0IsR0FHcEJDLFVBQ0lDLGlCQUFrQixXQUNkLE9BQU9DLEtBQUtDLE1BQU1DLE9BQU9DLFdBSWpDQyxTQUNJQyxRQUFTLFdBQVcsSUFBQUMsRUFBQU4sS0FDWk8sRUFBT1AsS0FDWE8sRUFBS0MsV0FBVyxjQUVoQlIsS0FBS1Asa0JBQW9CZ0IsRUFBRSx3QkFBd0IsR0FDbkRULEtBQUtOLGdCQUFrQmUsRUFBRSxpQkFBaUIsR0FFMUNBLEVBQUUsdUJBQXVCQyxTQUFTLGdCQUVsQ1YsS0FBS1csS0FBSyxLQUFLQyxLQUFLLFdBQ2hCTCxFQUFLcEIsY0FBZSxFQUNwQixJQUFJMEIsRUFBUUMsYUFBYUMsUUFBUSw2QkFBK0IsSUFLaEUsT0FKQVQsRUFBS2Isa0JBQWtCdUIsTUFBTUMsS0FBT0osRUFBUSxLQUM1Q1AsRUFBS1osZ0JBQWdCc0IsTUFBTUgsTUFBUUEsRUFBUSxLQUMzQ0osRUFBRUgsRUFBS1ksS0FBS1IsU0FBUyxpQkFDckJKLEVBQUthLE1BQU0sc0JBQ0piLEVBQUtLLEtBQUssT0FDbEJDLEtBQUssV0FHSixPQUZBSCxFQUFFLHNCQUFzQlcs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dEIsSUFEQSxJQUFJQyxFQUFLbEUsT0FBTytELEdBQ1A1QixFQUFJLEVBQUdBLEVBQUlQLFVBQVVDLE9BQVFNLElBQUssQ0FDekMsSUFBSWdDLEVBQWF2QyxVQUFVTyxHQUMzQixRQUFtQkwsSUFBZnFDLEdBQTJDLE9BQWZBLEVBS2hDLElBREEsSUFBSUMsRUFBWXBFLE9BQU9xRSxLQUFLckUsT0FBT21FLElBQzFCRyxFQUFZLEVBQUdDLEVBQU1ILEVBQVV2QyxPQUFReUMsRUFBWUMsRUFBS0QsSUFBYSxDQUM1RSxJQUFJRSxFQUFVSixFQUFVRSxHQUNwQkcsRUFBT3pFLE9BQU8wRSx5QkFBeUJQLEVBQVlLLFFBQzFDMUMsSUFBVDJDLEdBQXNCQSxFQUFLZCxhQUM3Qk8sRUFBR00sR0FBV0wsRUFBV0ssS0FJL0IsT0FBT04sd0JDM0JiUyxFQUFBQyxRQUFBLCtPQ0FBRCxFQUFBQyxRQUFBLHNyQkNFTUMsYUFDRixTQUFBQSxFQUFZQyxnR0FBVUMsQ0FBQXpKLEtBQUF1SixHQUNsQnZKLEtBQUt3SixTQUFXQSw0Q0FHWnZGLEVBQVM2RCxHQUNiOUgsS0FBS3dKLFNBQVNFLFVBQVUsa0JBQW1CekYsRUFBUzZELGlDQUdsRDdELEVBQVM2RCxHQUNYOUgsS0FBS3dKLFNBQVNFLFVBQVUsZ0JBQWlCekYsRUFBUzZELFlBSTFEcEQsT0FBT2lGLGlCQUFpQi9LLEVBQUFDLEVBQUkrSyxXQUN4QkMsU0FDSUMsSUFESyxXQUVELE9BQU8sSUFBSVAsRUFBZ0J2SiIsImZpbGUiOiIvYXBwL3N0YXRhbWljL3Jlc291cmNlcy9kaXN0L2pzL2FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWdWUgZnJvbSAndnVlJztcbmltcG9ydCBOb3RpZmljYXRpb25zIGZyb20gJy4vbWl4aW5zL05vdGlmaWNhdGlvbnMuanMnO1xuXG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvTm90aWZpY2F0aW9uQnVzJyk7XG5cbnZhciB2bSA9IG5ldyBWdWUoe1xuICAgIGVsOiAnI3N0YXRhbWljJyxcblxuICAgIG1peGluczogWyBOb3RpZmljYXRpb25zIF0sXG5cbiAgICBkYXRhOiB7XG4gICAgICAgIGlzUHVibGlzaFBhZ2U6IGZhbHNlLFxuICAgICAgICBpc1ByZXZpZXdpbmc6IGZhbHNlLFxuICAgICAgICBzaG93U2hvcnRjdXRzOiBmYWxzZSxcbiAgICAgICAgbmF2VmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHZlcnNpb246IFN0YXRhbWljLnZlcnNpb24sXG4gICAgICAgIGRyYWdnaW5nTm9uRmlsZTogZmFsc2UsXG4gICAgICAgIHNuZWFrUGVla1ZpZXdwb3J0OiBudWxsLFxuICAgICAgICBzbmVha1BlZWtGaWVsZHM6IG51bGwsXG4gICAgICAgIHdpbmRvd1dpZHRoOiBudWxsLFxuICAgICAgICBtb2RhbE9wZW46IGZhbHNlLFxuICAgICAgICBzaG93TG9naW5Nb2RhbDogZmFsc2VcbiAgICB9LFxuXG4gICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgaGFzU2VhcmNoUmVzdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcmVmcy5zZWFyY2guaGFzSXRlbXM7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbWV0aG9kczoge1xuICAgICAgICBwcmV2aWV3OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHNlbGYuJGJyb2FkY2FzdCgncHJldmlld2luZycpO1xuXG4gICAgICAgICAgICB0aGlzLnNuZWFrUGVla1ZpZXdwb3J0ID0gJCgnLnNuZWFrLXBlZWstdmlld3BvcnQnKVswXTtcbiAgICAgICAgICAgIHRoaXMuc25lYWtQZWVrRmllbGRzID0gJCgnLnBhZ2Utd3JhcHBlcicpWzBdO1xuXG4gICAgICAgICAgICAkKCcuc25lYWstcGVlay13cmFwcGVyJykuYWRkQ2xhc3MoJ2FuaW1hdGluZyBvbicpO1xuXG4gICAgICAgICAgICB0aGlzLndhaXQoMjAwKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzUHJldmlld2luZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0YXRhbWljLnNuZWFrcGVlay53aWR0aCcpIHx8IDQwMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNuZWFrUGVla1ZpZXdwb3J0LnN0eWxlLmxlZnQgPSB3aWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5zbmVha1BlZWtGaWVsZHMuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgJCh0aGlzLiRlbCkuYWRkQ2xhc3MoJ3NuZWFrLXBlZWtpbmcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsaXZlcHJldmlldy5vcGVuZWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53YWl0KDIwMCk7XG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkKCcjc25lYWstcGVlay1pZnJhbWUnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzLiRlbCkuYWRkQ2xhc3MoJ3NuZWFrLXBlZWstZWRpdGluZyBzbmVhay1wZWVrLWFuaW1hdGluZycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndhaXQoNTAwKTtcbiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICQodGhpcy4kZWwpLnJlbW92ZUNsYXNzKCdzbmVhay1wZWVrLWFuaW1hdGluZycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RvcFByZXZpZXdpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy4kYnJvYWRjYXN0KCdwcmV2aWV3aW5nLnN0b3BwZWQnKTtcblxuICAgICAgICAgICAgJCgnLnNuZWFrLXBlZWstd3JhcHBlcicpLmFkZENsYXNzKCdhbmltYXRpbmcnKTtcbiAgICAgICAgICAgICQodGhpcy4kZWwpLmFkZENsYXNzKCdzbmVhay1wZWVrLWFuaW1hdGluZycpO1xuICAgICAgICAgICAgJCh0aGlzLiRlbCkucmVtb3ZlQ2xhc3MoJ3NuZWFrLXBlZWstZWRpdGluZycpO1xuICAgICAgICAgICAgJCgnI3NuZWFrLXBlZWstaWZyYW1lJykuZmFkZU91dCgpO1xuICAgICAgICAgICAgJCgnLnNuZWFrLXBlZWstd3JhcHBlciAuaWNvbicpLmhpZGUoKTtcblxuICAgICAgICAgICAgdGhpcy53YWl0KDUwMCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbmVha1BlZWtWaWV3cG9ydC5zdHlsZS5sZWZ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNuZWFrUGVla0ZpZWxkcy5zdHlsZS53aWR0aCA9IG51bGw7XG4gICAgICAgICAgICAgICAgJCh0aGlzLiRlbCkucmVtb3ZlQ2xhc3MoJ3NuZWFrLXBlZWstYW5pbWF0aW5nJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzLiRlbCkucmVtb3ZlQ2xhc3MoJ3NuZWFrLXBlZWtpbmcnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53YWl0KDIwMCk7XG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJldmlld2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2xpdmVwcmV2aWV3LmNsb3NlZCcpO1xuICAgICAgICAgICAgICAgICQoJy5zbmVhay1wZWVrLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnb24nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53YWl0KDIwMCk7XG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkKCcuc25lYWstcGVlay13cmFwcGVyJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGluZycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIGFmdGVyIHNwZWNpZmllZCBtaWxsaXNlY29uZHNcbiAgICAgICAgICpcbiAgICAgICAgICogQSBuaWNlIGFsdGVybmF0aXZlIHRvIG5lc3RlZCBzZXRUaW1lb3V0cy5cbiAgICAgICAgICovXG4gICAgICAgIHdhaXQobXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZU5hdjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5uYXZWaXNpYmxlID0gIXRoaXMubmF2VmlzaWJsZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB0aGUgZHJhZ3N0YXJ0IGV2ZW50IGlzIHRyaWdnZXJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBldmVudCBkb2Vzbid0IGdldCB0cmlnZ2VyZWQgd2hlbiBkcmFnZ2luZyBzb21ldGhpbmcgZnJvbSBvdXRzaWRlIHRoZSBicm93c2VyLFxuICAgICAgICAgKiBzbyB3ZSBjYW4gZGV0ZXJtaW5lIHRoYXQgc29tZXRoaW5nIG90aGVyIHRoYW4gYSBmaWxlIGlzIGJlaW5nIGRyYWdnZWQuXG4gICAgICAgICAqL1xuICAgICAgICBkcmFnU3RhcnQoKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nTm9uRmlsZSA9IHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gdGhlIGRyYWdlbmQgZXZlbnQgaXMgdHJpZ2dlcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGRvZXNuJ3QgZ2V0IHRyaWdnZXJlZCB3aGVuIGRyYWdnaW5nIHNvbWV0aGluZyBmcm9tIG91dHNpZGUgdGhlIGJyb3dzZXIsXG4gICAgICAgICAqIHNvIHdlIGNhbiBkZXRlcm1pbmUgdGhhdCBzb21ldGhpbmcgb3RoZXIgdGhhbiBhIGZpbGUgaXMgYmVpbmcgZHJhZ2dlZC5cbiAgICAgICAgICovXG4gICAgICAgIGRyYWdFbmQoKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nTm9uRmlsZSA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNuZWFrUGVla1Jlc2l6ZVN0YXJ0KGUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLnNuZWFrUGVla1Jlc2l6aW5nKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5zbmVha1BlZWtSZXNpemVFbmQpO1xuICAgICAgICAgICAgJCgnLnNuZWFrLXBlZWstaWZyYW1lLXdyYXAnKS5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzbmVha1BlZWtSZXNpemVFbmQoZSkge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuc25lYWtQZWVrUmVzaXppbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5zbmVha1BlZWtSZXNpemVFbmQsIGZhbHNlKTtcbiAgICAgICAgICAgICQoJy5zbmVhay1wZWVrLWlmcmFtZS13cmFwJykuY3NzKCdwb2ludGVyLWV2ZW50cycsICdhdXRvJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc25lYWtQZWVrUmVzaXppbmcoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBlLmNsaWVudFg7XG5cbiAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIHdpZHRoIGJlaW5nIHRvbyBuYXJyb3cuXG4gICAgICAgICAgICB3aWR0aCA9ICh3aWR0aCA8IDM1MCkgPyAzNTAgOiB3aWR0aDtcblxuICAgICAgICAgICAgdGhpcy5zbmVha1BlZWtWaWV3cG9ydC5zdHlsZS5sZWZ0ID0gd2lkdGggKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5zbmVha1BlZWtGaWVsZHMuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdGF0YW1pYy5zbmVha3BlZWsud2lkdGgnLCB3aWR0aCk7XG5cbiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2xpdmVwcmV2aWV3LnJlc2l6aW5nJywgd2lkdGgpO1xuICAgICAgICB9LFxuICAgIH0sXG5cbiAgICByZWFkeTogZnVuY3Rpb24oKSB7XG4gICAgICAgIE1vdXNldHJhcC5iaW5kKFsnLycsICdjdHJsK2YnXSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgJCgnI2dsb2JhbC1zZWFyY2gnKS5mb2N1cygpO1xuICAgICAgICB9LCAna2V5dXAnKTtcblxuICAgICAgICBNb3VzZXRyYXAuYmluZCgnPycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1Nob3J0Y3V0cyA9IHRydWU7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgJ2tleXVwJyk7XG5cbiAgICAgICAgTW91c2V0cmFwLmJpbmQoJ2VzY2FwZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnY2xvc2UtbW9kYWwnKTtcbiAgICAgICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnY2xvc2UtZWRpdG9yJyk7XG4gICAgICAgICAgICB0aGlzLiRicm9hZGNhc3QoJ2Nsb3NlLXNlbGVjdG9yJyk7XG4gICAgICAgICAgICB0aGlzLiRicm9hZGNhc3QoJ2Nsb3NlLWRyb3Bkb3duJywgbnVsbCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgJ2tleXVwJyk7XG5cbiAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB3aGV0aGVyIHNvbWV0aGluZyBvdGhlciB0aGFuIGEgZmlsZSBpcyBiZWluZyBkcmFnZ2VkXG4gICAgICAgIC8vIHNvIHRoYXQgY29tcG9uZW50cyBjYW4gdGVsbCB3aGVuIGEgZmlsZSBpcyBiZWluZyBkcmFnZ2VkLlxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XG5cbiAgICAgICAgdGhpcy53aW5kb3dXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMud2luZG93V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpO1xuICAgIH0sXG5cbiAgICBldmVudHM6IHtcbiAgICAgICAgJ2NoYW5nZXNNYWRlJzogZnVuY3Rpb24gKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIC8vIElmIHRydWUsIGEgY29uZmlybWF0aW9uIGRpYWxvZyB3aWxsIGJlIGRpc3BsYXllZCB3aGVuIHRoZSB1c2VyIHRyaWVzIHRvXG4gICAgICAgICAgICAvLyBuYXZpZ2F0ZSBhd2F5IChvciByZWZyZXNoLCBldGMpLiBJZiBmYWxzZSwgdGhlIGRpYWxvZyB3aWxsIG5vIGxvbmdlciBzaG93LlxuICAgICAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoKSA9PiAnJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAnbW9kYWwub3Blbic6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubW9kYWxPcGVuID0gdHJ1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICAnbW9kYWwuY2xvc2UnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2FwcC5qcyIsImltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlLmh0bWwnXG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIHRoZW1lOiAnZGVmYXVsdCcsIC8vIGluZm8gd2FybmluZyBlcnJvciBzdWNjZXNzXG4gICAgdGltZUxpZmU6IDUwMDAsXG4gICAgY2xvc2VCdG46IGZhbHNlLFxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgIHByb3BzOiB7XG4gICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBkZXN0cm95ZWQ6IHtcbiAgICAgICAgICAgIHR3b1dheTogdHJ1ZSxcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICB0eXBlOiBPYmplY3QsXG4gICAgICAgICAgICBjb2VyY2Uob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNTaG93OiBmYWxzZVxuICAgICAgICB9XG4gICAgfSxcbiAgICBjb21wdXRlZDoge1xuICAgICAgICBzdHlsZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGBhbGVydC0ke3RoaXMub3B0aW9ucy50aGVtZX1gLFxuICAgICAgICAgICAgICAgICh0aGlzLm9wdGlvbnMuY2xvc2VCdG4pID8gJ2FsZXJ0LWRpc21pc3NpYmxlJyA6IG51bGwsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9LFxuICAgICAgICBzdHlsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKCR7dGhpcy5vcHRpb25zLmRpcmVjdGlvbk9mSnVtcGluZ30ke3RoaXMucG9zaXRpb24gKiAxMDB9JSlgXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlYWR5KCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZVxuICAgICAgICB9LCA1MClcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRpbWVMaWZlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydExhenlBdXRvRGVzdHJveSgpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRldGFjaGVkKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lckRlc3Ryb3kpXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIC8vIFB1YmxpY1xuICAgICAgICByZW1vdmUoKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGVhclRpbWVyKClcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy4kcmVtb3ZlKCkuJGRlc3Ryb3koKVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICB9LFxuICAgICAgICAvLyBQcml2YXRlXG4gICAgICAgIF9zdGFydExhenlBdXRvRGVzdHJveSgpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyVGltZXIoKVxuICAgICAgICAgICAgdGhpcy50aW1lckRlc3Ryb3kgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZW1vdmUoKS4kZGVzdHJveSgpXG4gICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMudGltZUxpZmUpXG4gICAgICAgIH0sXG4gICAgICAgIF9jbGVhclRpbWVyKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGltZXJEZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJEZXN0cm95KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfc3RhcnRUaW1lcigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGltZUxpZmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydExhenlBdXRvRGVzdHJveSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9zdG9wVGltZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRpbWVMaWZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xlYXJUaW1lcigpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvdG9hc3QvdG9hc3QvaW5kZXguanMiLCJpbXBvcnQgdGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZS5odG1sJ1xuaW1wb3J0IHZ1ZVRvYXN0IGZyb20gJy4uL3RvYXN0J1xuXG5pbXBvcnQge2lzTnVtYmVyfSBmcm9tICcuLi91dGlscy5qcydcblxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIG1heFRvYXN0czogNixcbiAgcG9zaXRpb246ICdsZWZ0IGJvdHRvbSdcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvYXN0czogW10sXG4gICAgICBvcHRpb25zOiBkZWZhdWx0T3B0aW9uc1xuICAgIH1cbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICBjbGFzc2VzT2ZQb3NpdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDbGFzc2VzT2ZQb3NpdGlvbih0aGlzLm9wdGlvbnMucG9zaXRpb24pXG4gICAgfSxcbiAgICBkaXJlY3Rpb25PZkp1bXBpbmcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXBkYXRlRGlyZWN0aW9uT2ZKdW1waW5nKHRoaXMub3B0aW9ucy5wb3NpdGlvbilcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICAvLyBQdWJsaWNcbiAgICBzaG93VG9hc3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fYWRkVG9hc3QobWVzc2FnZSwgb3B0aW9ucylcbiAgICAgIHRoaXMuX21vdmVUb2FzdCgpXG5cbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSxcbiAgICBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KVxuXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0sXG4gICAgLy8gUHJpdmF0ZVxuICAgIF9hZGRUb2FzdChtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgb3B0aW9ucy5kaXJlY3Rpb25PZkp1bXBpbmcgPSB0aGlzLmRpcmVjdGlvbk9mSnVtcGluZ1xuXG4gICAgICB0aGlzLnRvYXN0cy51bnNoaWZ0KHtcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgaXNEZXN0cm95ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0sXG4gICAgX21vdmVUb2FzdCh0b2FzdCkge1xuICAgICAgY29uc3QgbWF4VG9hc3RzID0gdGhpcy5vcHRpb25zLm1heFRvYXN0cyA+IDBcbiAgICAgICAgPyB0aGlzLm9wdGlvbnMubWF4VG9hc3RzXG4gICAgICAgIDogOTk5OVxuXG4gICAgICAvLyBtb3Zpbmd8fHJlbW92aW5nIG9sZCB0b2FzdHNcbiAgICAgIHRoaXMudG9hc3RzID0gdGhpcy50b2FzdHMucmVkdWNlUmlnaHQoKHByZXYsIHRvYXN0LCBpKSA9PiB7XG4gICAgICAgIGlmICh0b2FzdC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgIHJldHVybiBwcmV2XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSArIDEgPj0gbWF4VG9hc3RzKSB7XG4gICAgICAgICAgcmV0dXJuIHByZXZcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbdG9hc3RdLmNvbmNhdChwcmV2KVxuICAgICAgfSwgW10pXG4gICAgfSxcbiAgICBfdXBkYXRlQ2xhc3Nlc09mUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgIHJldHVybiBwb3NpdGlvbi5zcGxpdCgnICcpLnJlZHVjZSgocHJldiwgdmFsKSA9PiB7XG4gICAgICAgIHByZXZbYC0tJHt2YWwudG9Mb3dlckNhc2UoKX1gXSA9IHRydWVcblxuICAgICAgICByZXR1cm4gcHJldlxuICAgICAgfSwge30pXG4gICAgfSxcbiAgICBfdXBkYXRlRGlyZWN0aW9uT2ZKdW1waW5nKHBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gcG9zaXRpb24ubWF0Y2goL3RvcC9pKSA/ICcrJyA6ICctJ1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50czoge1xuICAgICd2dWUtdG9hc3QnOiB2dWVUb2FzdFxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvdG9hc3QvbWFuYWdlci9pbmRleC5qcyIsImltcG9ydCAnLi9wb2x5ZmlsbHMuanMnXG5pbXBvcnQgbWFuYWdlciBmcm9tICcuL21hbmFnZXInXG5cbmV4cG9ydCBkZWZhdWx0IG1hbmFnZXJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zdGF0YW1pYy9yZXNvdXJjZXMvanMvY29tcG9uZW50cy90b2FzdC9tYWluLmpzIiwiaW1wb3J0IFZ1ZVRvYXN0IGZyb20gJy4uL2NvbXBvbmVudHMvdG9hc3QvbWFpbi5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBjb21wb25lbnRzOiB7IFZ1ZVRvYXN0IH0sXG5cbiAgICBkYXRhOiB7XG4gICAgICAgIHRvYXN0OiBudWxsLFxuICAgICAgICBmbGFzaDogU3RhdGFtaWMuZmxhc2gsXG4gICAgfSxcblxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgZmxhc2hFeGlzdGluZ01lc3NhZ2VzKCkge1xuICAgICAgICAgICAgdGhpcy5mbGFzaC5mb3JFYWNoKFxuICAgICAgICAgICAgICAgICh7IHR5cGUsIG1lc3NhZ2UgfSkgPT4gdGhpcy5zZXRGbGFzaE1lc3NhZ2UobWVzc2FnZSwgeyB0aGVtZTogdHlwZSB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kVG9hc3ROb3RpZmljYXRpb25zKCkge1xuICAgICAgICAgICAgdGhpcy50b2FzdCA9IHRoaXMuJHJlZnMudG9hc3Q7XG4gICAgICAgICAgICBpZiAodGhpcy50b2FzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9hc3Quc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tIHJpZ2h0JyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXRGbGFzaE1lc3NhZ2UobWVzc2FnZSwgb3B0cykge1xuICAgICAgICAgICAgdGhpcy50b2FzdC5zaG93VG9hc3QobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgIHRoZW1lOiAgICBvcHRzLnRoZW1lLFxuICAgICAgICAgICAgICAgIHRpbWVMaWZlOiBvcHRzLnRpbWVvdXQgfHwgNTAwMCxcbiAgICAgICAgICAgICAgICBjbG9zZUJ0bjogb3B0cy5oYXNPd25Qcm9wZXJ0eSgnZGlzbWlzc2libGUnKSA/IG9wdHMuZGlzbWlzc2libGUgOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfSxcblxuICAgIGV2ZW50czoge1xuICAgICAgICBzZXRGbGFzaFN1Y2Nlc3MobWVzc2FnZSwgb3B0cykge1xuICAgICAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgICAgICAgICBvcHRzLnRoZW1lID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgdGhpcy5zZXRGbGFzaE1lc3NhZ2UobWVzc2FnZSwgb3B0cyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0Rmxhc2hFcnJvcihtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICAgICAgICAgIG9wdHMudGhlbWUgPSAnZGFuZ2VyJztcbiAgICAgICAgICAgIHRoaXMuc2V0Rmxhc2hNZXNzYWdlKG1lc3NhZ2UsIG9wdHMpO1xuICAgICAgICB9LFxuICAgIH0sXG5cbiAgICByZWFkeSgpIHtcbiAgICAgICAgdGhpcy5iaW5kVG9hc3ROb3RpZmljYXRpb25zKCk7XG4gICAgICAgIHRoaXMuZmxhc2hFeGlzdGluZ01lc3NhZ2VzKCk7XG4gICAgfSxcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zdGF0YW1pYy9yZXNvdXJjZXMvanMvbWl4aW5zL05vdGlmaWNhdGlvbnMuanMiLCJpZiAoIU9iamVjdC5hc3NpZ24pIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdCwgJ2Fzc2lnbicsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgdmFsdWU6IGZ1bmN0aW9uKHRhcmdldCwgZmlyc3RTb3VyY2UpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgZmlyc3QgYXJndW1lbnQgdG8gb2JqZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGlmIChuZXh0U291cmNlID09PSB1bmRlZmluZWQgfHwgbmV4dFNvdXJjZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGtleXNBcnJheSA9IE9iamVjdC5rZXlzKE9iamVjdChuZXh0U291cmNlKSk7XG4gICAgICAgIGZvciAodmFyIG5leHRJbmRleCA9IDAsIGxlbiA9IGtleXNBcnJheS5sZW5ndGg7IG5leHRJbmRleCA8IGxlbjsgbmV4dEluZGV4KyspIHtcbiAgICAgICAgICB2YXIgbmV4dEtleSA9IGtleXNBcnJheVtuZXh0SW5kZXhdO1xuICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuZXh0U291cmNlLCBuZXh0S2V5KTtcbiAgICAgICAgICBpZiAoZGVzYyAhPT0gdW5kZWZpbmVkICYmIGRlc2MuZW51bWVyYWJsZSkge1xuICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvO1xuICAgIH1cbiAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3RhdGFtaWMvcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvdG9hc3QvcG9seWZpbGxzLmpzIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9dnVlLXRvYXN0LW1hbmFnZXJfY29udGFpbmVyIDpjbGFzcz1jbGFzc2VzT2ZQb3NpdGlvbj4gPHZ1ZS10b2FzdCB2LWZvcj1cXFwidG9hc3QgaW4gdG9hc3RzXFxcIiA6bWVzc2FnZT10b2FzdC5tZXNzYWdlIDpvcHRpb25zPXRvYXN0Lm9wdGlvbnMgOmRlc3Ryb3llZC5zeW5jPXRvYXN0LmlzRGVzdHJveWVkIDpwb3NpdGlvbj0kaW5kZXg+PC92dWUtdG9hc3Q+IDwvZGl2PiBcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zdGF0YW1pYy9yZXNvdXJjZXMvanMvY29tcG9uZW50cy90b2FzdC9tYW5hZ2VyL3RlbXBsYXRlLmh0bWxcbi8vIG1vZHVsZSBpZCA9IDY5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz12dWUtdG9hc3RfY29udGFpbmVyIEBtb3VzZW92ZXI9X3N0b3BUaW1lciBAbW91c2VsZWF2ZT1fc3RhcnRUaW1lciA6c3R5bGU9c3R5bGUgdi1zaG93PWlzU2hvdyB0cmFuc2l0aW9uPiA8ZGl2IGNsYXNzPVxcXCJ2dWUtdG9hc3RfbWVzc2FnZSBhbGVydFxcXCIgOmNsYXNzPXN0eWxlcz4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1jbG9zZSBhcmlhLWxhYmVsPUNsb3NlIHYtaWY9b3B0aW9ucy5jbG9zZUJ0biBAY2xpY2s9cmVtb3ZlPiA8c3BhbiBhcmlhLWhpZGRlbj10cnVlPsOXPC9zcGFuPiA8L2J1dHRvbj4gPHNwYW4gdi1odG1sPW1lc3NhZ2U+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL3RvYXN0L3RvYXN0L3RlbXBsYXRlLmh0bWxcbi8vIG1vZHVsZSBpZCA9IDY5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJpbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcblxuY2xhc3MgTm90aWZpY2F0aW9uQnVzIHtcbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZSkge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgc3VjY2VzcyhtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuJGRpc3BhdGNoKCdzZXRGbGFzaFN1Y2Nlc3MnLCBtZXNzYWdlLCBvcHRzKTtcbiAgICB9XG5cbiAgICBlcnJvcihtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuJGRpc3BhdGNoKCdzZXRGbGFzaEVycm9yJywgbWVzc2FnZSwgb3B0cyk7XG4gICAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhWdWUucHJvdG90eXBlLCB7XG4gICAgJG5vdGlmeToge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbkJ1cyh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3N0YXRhbWljL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL05vdGlmaWNhdGlvbkJ1cy5qcyJdLCJzb3VyY2VSb290IjoiIn0=